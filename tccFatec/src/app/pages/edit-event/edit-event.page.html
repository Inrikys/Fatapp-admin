<main-header></main-header>

<ion-content color="tertiary">

  <div *ngIf="events" class="container">
    <h1 class="page-title">Editar evento</h1>
    <form [formGroup]="formEvent">
      <ion-grid class="box">
        <div text-center>
          <img class="page-icon" src="../../../assets/imgs/edit-event.jpeg">
        </div>
        <ion-row>
          <ion-col size="12">
            <ion-item lines="none">
              <ion-label position="fixed">Evento: </ion-label>
              <ion-input disabled class="edit-form" [(ngModel)]="title" formControlName="title" placeholder="Título">
              </ion-input>
            </ion-item>
            <ng-container *ngFor="let validation of validationMessages.title">
              <div class="error-message"
                *ngIf="formEvent.get('title').hasError(validation.type) && (formEvent.get('title').dirty || formEvent.get('title').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col size="12">
            <ion-item lines="none">
              <ion-label position="fixed">Edição: </ion-label>
              <ion-input disabled class="edit-form" [(ngModel)]="edition" formControlName="edition"
                placeholder="Edição"></ion-input>
            </ion-item>
            <ng-container *ngFor="let validation of validationMessages.edition">
              <div class="error-message"
                *ngIf="formEvent.get('edition').hasError(validation.type) && (formEvent.get('edition').dirty || formEvent.get('edition').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </ion-col>
        </ion-row>


        <ion-row>
          <ion-col size="12">
            <ion-item lines="none">
              <ion-label position="fixed">De: </ion-label>
              <ion-datetime disabled class="edit-form" [(ngModel)]="initialDate" formControlName="initialDate"
                placeholder="Escolha a data" displayFormat="DD/MM/YYYY" min="2019-06-04" max="2050-01-01">
              </ion-datetime>
            </ion-item>
            <ng-container *ngFor="let validation of validationMessages.initialDate">
              <div class="error-message"
                *ngIf="formEvent.get('initialDate').hasError(validation.type) && (formEvent.get('initialDate').dirty || formEvent.get('initialDate').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12">
            <ion-item lines="none">
              <ion-label position="fixed">Até: </ion-label>
              <ion-datetime disabled class="edit-form" [(ngModel)]="finalDate" formControlName="finalDate"
                placeholder="Escolha a data" displayFormat="DD/MM/YYYY" min="2019-06-04" max="2050-01-01">
              </ion-datetime>
            </ion-item>
            <ng-container *ngFor="let validation of validationMessages.finalDate">
              <div class="error-message"
                *ngIf="formEvent.get('finalDate').hasError(validation.type) && (formEvent.get('finalDate').dirty || formEvent.get('finalDate').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12">
            <ion-item lines="none">
              <ion-label class="banner">Banner: </ion-label>
            </ion-item>
            <input disabled class="edit-form" [(ngModel)]="banner" formControlName="banner" type="file">
            <ng-container *ngFor="let validation of validationMessages.banner">
              <div class="error-message"
                *ngIf="formEvent.get('banner').hasError(validation.type) && (formEvent.get('banner').dirty || formEvent.get('banner').touched)">
                {{ validation.message }}
              </div>
            </ng-container>
          </ion-col>
        </ion-row>
        <div text-center>
          <ion-button disabled class="btn-block btn-register edit-form" (click)="upload()">Editar</ion-button>
        </div>
      </ion-grid>
    </form>

    <span *ngIf="!events || events == ''">
      <div>Você ainda não cadastrou nenhum evento</div>
    </span>

    <span *ngIf="events && events != ''">
      <h1 class="page-title">Eventos já cadastrados</h1>
      <ion-grid class="box">
        <form [formGroup]="eventSearchForm">
          <ion-row>
            <ion-col>
              <ion-label position="fixed">Pesquisar:</ion-label>
              <ion-input formControlName="name"></ion-input>
            </ion-col>
          </ion-row>
        </form>
      </ion-grid>
      <div class="ion-text-center">
        <ion-button class="btn-speakers" (click)="getEventsSearch()">Pesquisar</ion-button>
      </div>
      <div class="ion-padding-top ion-padding-bottom ion-margin-bottom">
        <div color="white">
          <ion-list *ngIf="!eventSearch || eventSearch == ''">
            <ion-item *ngFor="let event of events">
              <ion-label (click)="selectEvent(event.id)">Título: <span>{{event.title}}</span> Edição:
                <span>{{event.edition}}</span></ion-label>
              <ion-icon (click)="removeEvent(event.id)" ios="ios-remove-circle" md="md-remove-circle" slot="end">
              </ion-icon>
            </ion-item>
          </ion-list>
          <ion-list *ngIf="eventSearch">
            <ion-item *ngFor="let event of eventSearch">
              <ion-label (click)="selectEvent(event.id)">Título: <span>{{event.title}}</span> Edição:
                <span>{{event.edition}}</span></ion-label>
              <ion-icon (click)="removeEvent(event.id)" ios="ios-remove-circle" md="md-remove-circle" slot="end">
              </ion-icon>
            </ion-item>
          </ion-list>
        </div>
      </div>
    </span>
  </div>

</ion-content>